# Supabase Deployment Guide - –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–µ–ø–ª–æ–π

## üö® –í–ê–ñ–ù–û: –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Supabase CLI (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
npm install -g supabase

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
supabase init

# –°–≤—è–∑–∫–∞ —Å production
supabase link --project-ref mqppvcrlvsgrsqelglod

# –í—ã–≥—Ä—É–∑–∫–∞ —Ç–µ–∫—É—â–µ–π —Å—Ö–µ–º—ã –ë–î
supabase db pull

# –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ Supabase
supabase start
```

## üìã –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

### ‚úÖ –í–°–ï–ì–î–ê –¥–µ–ª–∞–π—Ç–µ:
1. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ** –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
2. **–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏** –¥–ª—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –ë–î
3. **–î–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø—ã** –ø–µ—Ä–µ–¥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
4. **–î–µ–ø–ª–æ–π—Ç–µ –ø–æ –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏** –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ Edge Functions
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ feature branches** –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### ‚ùå –ù–ò–ö–û–ì–î–ê –Ω–µ –¥–µ–ª–∞–π—Ç–µ:
1. **–ù–µ –º–µ–Ω—è–π—Ç–µ –ë–î –Ω–∞–ø—Ä—è–º—É—é** —á–µ—Ä–µ–∑ Dashboard –≤ production
2. **–ù–µ –¥–µ–ø–ª–æ–π—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ä–∞–∑—É** –∫–æ–º–∞–Ω–¥–æ–π `supabase functions deploy`
3. **–ù–µ —É–¥–∞–ª—è–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏** –ø–æ—Å–ª–µ –∏—Ö –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
4. **–ù–µ –º–µ–Ω—è–π—Ç–µ —Å—Ç–∞—Ä—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏** - —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–æ–≤—ã–µ

## üîÑ Workflow –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ë–î (—Ç–∞–±–ª–∏—Ü—ã, RLS, triggers)
```bash
# 1. –°–æ–∑–¥–∞–µ–º –º–∏–≥—Ä–∞—Ü–∏—é
supabase migration new add_new_feature

# 2. –ü–∏—à–µ–º SQL –≤ —Å–æ–∑–¥–∞–Ω–Ω–æ–º —Ñ–∞–π–ª–µ
# supabase/migrations/[timestamp]_add_new_feature.sql

# 3. –¢–µ—Å—Ç–∏—Ä—É–µ–º –ª–æ–∫–∞–ª—å–Ω–æ
supabase db reset

# 4. –ï—Å–ª–∏ –≤—Å–µ –û–ö - –ø—É—à–∏–º –≤ production
supabase db push
```

### Edge Functions
```bash
# 1. –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ª–æ–∫–∞–ª—å–Ω–æ
supabase functions serve function-name

# 2. –î–µ–ø–ª–æ–∏–º –¢–û–õ–¨–ö–û —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é
supabase functions deploy function-name

# 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏
supabase functions logs function-name
```

### Secrets –∏ Environment Variables
```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ–∫—Ä–µ—Ç—ã
supabase secrets set KEY_NAME=value

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–ø–∏—Å–æ–∫ —Å–µ–∫—Ä–µ—Ç–æ–≤
supabase secrets list
```

## üîô –û—Ç–∫–∞—Ç—ã –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

#### 1. –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
```sql
-- –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –æ—Ç–∫–∞—Ç–∞
-- supabase/migrations/[timestamp]_rollback_feature.sql
DROP TABLE IF EXISTS broken_table;
-- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```

#### 2. –û—Ç–∫–∞—Ç Edge Function
```bash
# –î–µ–ø–ª–æ–∏–º –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é –∏–∑ git
git checkout HEAD~1 -- supabase/functions/function-name
supabase functions deploy function-name
```

#### 3. –ü–æ–ª–Ω—ã–π –æ—Ç–∫–∞—Ç –ë–î (–û–°–¢–û–†–û–ñ–ù–û!)
```bash
# –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –±—ç–∫–∞–ø
supabase db reset --remote
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
supabase/
‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îú‚îÄ‚îÄ 20240101000000_initial_schema.sql
‚îÇ   ‚îú‚îÄ‚îÄ 20240102000000_add_rls_policies.sql
‚îÇ   ‚îî‚îÄ‚îÄ 20240103000000_add_functions.sql
‚îú‚îÄ‚îÄ functions/
‚îÇ   ‚îú‚îÄ‚îÄ send-sms/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îú‚îÄ‚îÄ send-email/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îî‚îÄ‚îÄ ai-dispatcher/
‚îÇ       ‚îî‚îÄ‚îÄ index.ts
‚îî‚îÄ‚îÄ seed.sql  # –î–∞–Ω–Ω—ã–µ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```

## üéØ –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ —Å `supabase start`
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ (`supabase db reset`)
- [ ] Edge Functions —Ä–∞–±–æ—Ç–∞—é—Ç –ª–æ–∫–∞–ª—å–Ω–æ (`supabase functions serve`)
- [ ] –°–æ–∑–¥–∞–Ω –±—ç–∫–∞–ø –≤–∞–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –ö–æ–¥ –∑–∞–∫–æ–º–º–∏—á–µ–Ω –≤ git
- [ ] –°–æ–∑–¥–∞–Ω PR –∏ –ø—Ä–æ—à–µ–ª review

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–µ–ø–ª–æ—è

### Production –¥–µ–ø–ª–æ–π
```bash
# 1. –î–µ–ø–ª–æ–π –º–∏–≥—Ä–∞—Ü–∏–π
supabase db push

# 2. –î–µ–ø–ª–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
supabase functions deploy send-sms
supabase functions deploy send-email
supabase functions deploy ai-dispatcher

# 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
supabase secrets set TELNYX_API_KEY=xxx
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π
supabase functions logs send-sms --tail

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
supabase status
```

## üí° Best Practices

1. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω—É–º–µ—Ä—É—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
2. **–ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å**: –û–¥–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è = –æ–¥–Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
3. **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –ú–∏–≥—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –º–∏–≥—Ä–∞—Ü–∏—è—Ö –æ —Ç–æ–º, —á—Ç–æ –∏ –∑–∞—á–µ–º –º–µ–Ω—è–µ—Ç—Å—è
5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å production-like –¥–∞–Ω–Ω—ã–º–∏ –ª–æ–∫–∞–ª—å–Ω–æ

## üÜò Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Edge Function –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏
supabase functions logs function-name

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–∫—Ä–µ—Ç—ã
supabase secrets list

# –ü–µ—Ä–µ–¥–µ–ø–ª–æ–∏–≤–∞–µ–º —Å --no-verify-jwt –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å auth
supabase functions deploy function-name --no-verify-jwt
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
```bash
# –°–º–æ—Ç—Ä–∏–º —Å—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–π
supabase migration list

# –ü—Ä–∏–º–µ–Ω—è–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é
supabase db push --dry-run  # –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º
supabase db push            # –ó–∞—Ç–µ–º –ø—Ä–∏–º–µ–Ω—è–µ–º
```

### –ü—Ä–æ–±–ª–µ–º–∞: –õ–æ–∫–∞–ª—å–Ω—ã–π Supabase –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º Docker
# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
supabase stop

# –û—á–∏—â–∞–µ–º volumes
supabase stop --no-backup

# –ó–∞–ø—É—Å–∫–∞–µ–º –∑–∞–Ω–æ–≤–æ
supabase start
```

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏–π

- Supabase Dashboard: https://app.supabase.com/project/mqppvcrlvsgrsqelglod
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://supabase.com/docs
- Support: support@supabase.com

---

**Remember**: –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ production –¥–µ–ø–ª–æ–µ–º!